/*
ë¬¸ì œ ìš”ì•½ ğŸ“˜
- ì´ˆí•­ kì¸ **ìš°ë°•ìˆ˜ì—´**ì„ ìƒì„±í•˜ê³ ,
- ìš°ë°•ìˆ˜ì—´ì„ ì¢Œí‘œ (x, y) = (ìˆœì„œ, ìˆ˜ì—´ê°’)ìœ¼ë¡œ í‘œí˜„í•˜ì—¬ êº¾ì€ì„  ê·¸ë˜í”„ë¥¼ ê·¸ë¦¼
- ì£¼ì–´ì§„ êµ¬ê°„ [a, b]ì— ëŒ€í•´ x=aì—ì„œ x=n+bê¹Œì§€ì˜ êµ¬ê°„ì— ëŒ€í•´ **ë©´ì (ì •ì ë¶„ ê²°ê³¼)**ì„ êµ¬í•¨
- ë‹¨, bëŠ” ìŒìˆ˜ì´ê³  nì€ ìš°ë°•ìˆ˜ì—´ì´ 1ì´ ë˜ê¸°ê¹Œì§€ ê±¸ë¦¬ëŠ” ì´ ë‹¨ê³„ ìˆ˜
- ë§Œì•½ a > n + bë©´ ìœ íš¨í•˜ì§€ ì•Šì€ êµ¬ê°„ì´ë¯€ë¡œ ê²°ê³¼ëŠ” -1.0

ìš°ë°•ìˆ˜ì—´ ìƒì„± ê·œì¹™ (Collatz ì¶”ì¸¡):
1. kê°€ ì§ìˆ˜ë©´ â†’ k / 2
2. kê°€ í™€ìˆ˜ë©´ â†’ k * 3 + 1
â†’ 1ì´ ë  ë•Œê¹Œì§€ ë°˜ë³µ

ë©´ì  ê³„ì‚° ë°©ì‹ ğŸ“
- ì¸ì ‘í•œ ë‘ ì¢Œí‘œ (x, y1), (x+1, y2)ì˜ ì‚¬ë‹¤ë¦¬ê¼´ ë„“ì´ = (y1 + y2) / 2
- êº¾ì¸ êµ¬ê°„ ê°œìˆ˜ëŠ” (ìˆ˜ì—´ ê¸¸ì´ - 1)ê°œ

ì…ë ¥ ğŸ¯
- int k: ìš°ë°•ìˆ˜ì—´ì˜ ì´ˆí•­ (2 â‰¤ k â‰¤ 10,000)
- int[][] ranges: ì •ì ë¶„ êµ¬ê°„ ëª©ë¡
    * ê° ranges[i]ëŠ” [a, b] (0 â‰¤ a < 200, -200 < b â‰¤ 0)

ì¶œë ¥ ğŸ§¾
- double[] : ê° êµ¬ê°„ì˜ ì •ì ë¶„ ê²°ê³¼ ëª©ë¡ (êµ¬ê°„ì´ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ -1.0)

ì˜ˆì‹œ ì„¤ëª… ğŸ’¡
ì˜ˆ) k = 5
ìˆ˜ì—´: 5 â†’ 16 â†’ 8 â†’ 4 â†’ 2 â†’ 1
ì¢Œí‘œ: (0,5), (1,16), ..., (5,1)
ë„“ì´: (5+16)/2, (16+8)/2, ... â†’ ì‚¬ë‹¤ë¦¬ê¼´ 5ê°œ

ì˜ˆ) range [2, -3]
â†’ ìˆ˜ì—´ ê¸¸ì´ = 5 (n = 5)
â†’ b = -3 â†’ end = 2
â†’ [2,2] ëŠ” ì‹œì‘ == ëì´ë¯€ë¡œ ë„“ì´ 0.0

ì£¼ì˜í•  ì  âš ï¸
- ë„“ì´ êµ¬ê°„ì€ [a, n+b) ë²”ìœ„ì´ë¯€ë¡œ ë§ˆì§€ë§‰ ì  í¬í•¨ X
- ì •ì ë¶„ ê²°ê³¼ëŠ” double
- ìœ íš¨í•˜ì§€ ì•Šì€ êµ¬ê°„ì€ -1.0ìœ¼ë¡œ ì²˜ë¦¬

*/


import java.util.*;

class Solution {
    public double[] solution(int k, int[][] ranges) {
        double[] answer = new double[ranges.length];
        List<int[]> collatz = new ArrayList<>();
        int idx = 0;
        collatz.add(new int[]{idx,k});
        while(k!=1){
            if(k%2==0)k/=2;
            else k = k*3+1;
            idx++;
            collatz.add(new int[]{idx,k});
        }
        // a~idx-b ê¹Œì§€ì˜ ë„“ì´ 
        for(int i=0;i<ranges.length;i++){
            double sum=0;
            //bê°€ aë³´ë‹¤ ì‘ìœ¼ë©´ -1
            if(idx+ranges[i][1]<ranges[i][0])sum=-1.0;
            //bê°€ ì¸ë±ìŠ¤ ì´ˆê³¼ì—¬ë„ -1
            else if(idx+ranges[i][1]>idx)sum=-1;
            else {
                for(int j=ranges[i][0];j<idx+ranges[i][1];j++){
                    int[] hight1 = collatz.get(j);
                    int[] hight2 = collatz.get(j+1);
                    sum += (hight1[1]+hight2[1])/2.0;
                }
            }
            answer[i] = sum;
        }
        return answer;
    }
}
